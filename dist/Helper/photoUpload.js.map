{"version":3,"sources":["../../Helper/photoUpload.js"],"names":["fileUpload","require","profileUpload","driverProfileUpload","multer","exports","photoUpload","req","res","next","console","log","user","role","single","err","MulterError","code"],"mappings":"AAAA,MAAMA,aAAaC,QAAQ,4BAAR,CAAnB;AACA,MAAMC,gBAAgBD,QAAQ,+BAAR,CAAtB;AACA,MAAME,sBAAsBF,QAAQ,qCAAR,CAA5B;AACA,MAAMG,SAASH,QAAQ,QAAR,CAAf;AACAI,QAAQC,WAAR,GAAsB,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAAoB;AACxCC,UAAQC,GAAR,CAAYJ,IAAIK,IAAJ,CAASC,IAArB;AACA,MAAIN,IAAIK,IAAJ,CAASC,IAAT,KAAkB,eAAtB,EAAuC;AACrCb,eAAWc,MAAX,CAAkB,QAAlB,EAA4BP,GAA5B,EAAiCC,GAAjC,EAAsCO,OAAO;AAC3C,UACEA,eAAeX,OAAOY,WAAtB,IACAD,IAAIE,IAAJ,KAAa,uBAFf,EAGE;AACAF,cAAM,IAAN;AACD;AACDN,WAAKM,GAAL;AACD,KARD;AASD,GAVD,MAWK,IAAIR,IAAIK,IAAJ,CAASC,IAAT,KAAkB,cAAtB,EAAsC;AACzCV,wBAAoBW,MAApB,CAA2B,YAA3B,EAAyCP,GAAzC,EAA8CC,GAA9C,EAAmDO,OAAO;AACxD,UACEA,eAAeX,OAAOY,WAAtB,IACAD,IAAIE,IAAJ,KAAa,uBAFf,EAGE;AACAF,cAAM,IAAN;AACD;AACDN,WAAKM,GAAL;AACD,KARD;AASD;AACF,CAxBD","file":"photoUpload.js","sourcesContent":["const fileUpload = require('../middlewares/docs-upload');\nconst profileUpload = require('../middlewares/profile-upload');\nconst driverProfileUpload = require('../middlewares/driverProfile-upload');\nconst multer = require('multer');\nexports.photoUpload = (req, res, next) => {\n  console.log(req.user.role);\n  if (req.user.role === 'Storage Owner') {\n    fileUpload.single('c_docs')(req, res, err => {\n      if (\n        err instanceof multer.MulterError &&\n        err.code === 'LIMIT_UNEXPECTED_FILE'\n      ) {\n        err = null;\n      }\n      next(err);\n    });\n  }\n  else if (req.user.role === 'Truck Driver') {\n    driverProfileUpload.single('driver_img')(req, res, err => {\n      if (\n        err instanceof multer.MulterError &&\n        err.code === 'LIMIT_UNEXPECTED_FILE'\n      ) {\n        err = null;\n      }\n      next(err);\n    });\n  }\n}"]}